STAGE 16 â€” Smart Pricing + Test Login Credential Manager
ğŸ”’ Important scope

NO real authentication enforcement yet

This is admin-only test tooling

Real auth/hard security comes later (Stage 20+)

ğŸ”§ STAGE 16 PROMPT (COPY & PASTE INTO REPLIT)

Project Context
Ziba is a multi-country ride-hailing platform (Africa, USA, Mexico, UK, France, Ghana, Liberia, South Africa).
We are currently in development & testing mode.
Authentication is intentionally relaxed, but admin-only test controls must exist.

ğŸ¯ Stage 16 Goals

Implement two major systems:

Smart Pricing Controls (Uber-style but fairer)

Admin Test Login Credential Manager (THIS WAS MISSING BEFORE)

ğŸ”¹ PART A â€” Smart Pricing & Fairness Controls
1ï¸âƒ£ Extend existing â€œManage Ride Faresâ€ system

Add the following fields per country:

Base Fare

Price per KM/Mile (toggle: KM â†” Mile per country)

Price per Minute

Minimum Fare

Platform Commission %

Driver Share %

Optional Soft Surge Multiplier

Default: OFF

Max allowed surge cap (e.g. 1.3Ã—)

Peak Hour Windows (optional)

Weather / Traffic multiplier (manual admin control for now)

Ensure old rides are not recalculated â€” pricing only applies to new rides.

2ï¸âƒ£ Admin Pricing Preview Panel

Inside Manage Ride Fares, add a preview box:

Example Preview

Distance: 10 KM / 6 Miles

Duration: 20 minutes

Rider Pays: â‚¦____ / $____

Driver Earns: â‚¦____ / $____

Platform Earns: â‚¦____ / $____

This updates live as admin adjusts pricing.

ğŸ”¹ PART B â€” Admin Test Login Credential Manager (CRITICAL)
3ï¸âƒ£ Add NEW Admin Dashboard Button

Create a new card/button on Admin Dashboard:

ğŸ”‘ Manage Test Logins
Create and manage fake login credentials for testing

4ï¸âƒ£ Create Admin Page: /admin/test-logins

This page allows admin to generate, view, reset, and delete test credentials.

5ï¸âƒ£ Supported Test Accounts

Admin can create test credentials for:

Users

Drivers

Directors

Admins (limited)

Each test account includes:

Role (User / Driver / Director / Admin)

Country

Region / City

Status (Active / Suspended)

Auto-generated Email

e.g. driver_test_abuja_01@ziba.test

Auto-generated Password

Visible only once, then masked

â€œLogin Asâ€ button (DEV MODE ONLY)

6ï¸âƒ£ Test Login Rules (IMPORTANT)

These credentials DO NOT affect real users

Stored in a test_accounts table

Flagged with isTestAccount = true

Can be wiped completely later with one admin action

Cannot be used in production mode

7ï¸âƒ£ Login Simulation (No Real Auth Yet)

For now:

Clicking â€œLogin Asâ€ sets a session context:

role

country

userId

Redirects to the correct dashboard:

User â†’ User flow

Driver â†’ Driver flow

Director â†’ Director dashboard

No password enforcement yet â€” this is testing only.

ğŸ”¹ PART C â€” Safety & Visibility
8ï¸âƒ£ Admin Visibility Rules

Admin sees ALL test accounts

Test accounts are visually labeled:

ğŸ§ª TEST USER

ğŸ§ª TEST DRIVER

ğŸ§ª TEST DIRECTOR

9ï¸âƒ£ Production Guardrail

Add environment guard:

If NODE_ENV=production

Disable /admin/test-logins

Hide â€œManage Test Loginsâ€ button

âœ… Completion Criteria

Stage 16 is complete when:

Smart pricing controls exist per country

Price per KM/Mile is supported

Admin can preview fares

Admin can create fake login credentials

Admin can â€œLogin Asâ€ User / Driver / Director

No real auth is enforced yet

Test accounts are isolated and removable