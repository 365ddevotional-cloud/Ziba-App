EXTEND ACCOUNT CREATION TO SUPPORT RIDERS, DRIVERS, AND DIRECTORS WITH VERIFICATION.

CURRENT STATE:
- â€œCreate Accountâ€ works but only creates RIDER accounts.
- Driver and Director signup flows do NOT exist yet.
- Verification exists only for Rider.

GOAL:
- Allow users to create THREE account types:
  1. Rider
  2. Driver
  3. Director
- Each role must have its OWN signup flow, verification, and dashboard.
- NO breaking changes to existing Rider flow.

REQUIREMENTS (DO NOT SKIP):

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1ï¸âƒ£ ACCOUNT TYPE SELECTION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Add a role selector BEFORE signup:
  - Options: Rider | Driver | Director
- This can be:
  - Tabs, radio buttons, or a select dropdown
- Selected role determines:
  - Which form loads
  - Which API endpoint is called
  - Which verification logic runs
  - Which dashboard user is redirected to

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2ï¸âƒ£ SIGNUP FLOWS PER ROLE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ§ RIDER (already exists â€“ keep working):
- Endpoint: POST /api/rider/register
- Fields:
  - fullName
  - email
  - password
  - confirmPassword
  - phone (optional)
  - city (optional)
- Verification: email verification

ğŸš— DRIVER (NEW):
- Endpoint: POST /api/driver/register
- Fields:
  - fullName
  - email
  - phone (required)
  - vehicleType
  - vehiclePlate
  - password
  - confirmPassword
- Verification REQUIRED:
  - email verification
  - driver starts as status = PENDING
- Redirect after signup:
  - /driver/pending-verification

ğŸ§‘â€ğŸ’¼ DIRECTOR (NEW â€“ RESTRICTED):
- Endpoint: POST /api/director/register
- Fields:
  - fullName
  - email
  - password
  - confirmPassword
- Verification REQUIRED:
  - email verification
  - admin approval flag (isApproved = false)
- Director CANNOT access dashboard until approved by Admin
- Redirect after signup:
  - /director/pending-approval

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3ï¸âƒ£ VERIFICATION SYSTEM (MANDATORY)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Implement unified verification system:
  - Send verification email for ALL roles
  - Token-based verification
- Endpoints:
  - POST /api/auth/send-verification
  - GET /api/auth/verify?token=xxx
- Until verified:
  - User cannot log in
  - Show â€œCheck your email to verify your accountâ€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
4ï¸âƒ£ ROLE-AWARE LOGIN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Login must:
  - Detect role (rider | driver | director)
  - Enforce verification + approval rules
- Redirects:
  - Rider â†’ /rider/home
  - Driver (approved) â†’ /driver/home
  - Driver (pending) â†’ /driver/pending-verification
  - Director (approved) â†’ /director/dashboard
  - Director (pending) â†’ /director/pending-approval

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5ï¸âƒ£ DATABASE & SECURITY
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Update Prisma models safely:
  - Add role enum if not present
  - Add isVerified flag
  - Add isApproved flag for Director
- Hash all passwords
- Prevent role escalation (no switching roles after signup)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
6ï¸âƒ£ UI / UX RULES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- â€œCreate Accountâ€ button must:
  - Always be clickable
  - Submit correct role form
- Clear messages:
  - â€œVerify your emailâ€
  - â€œAwaiting admin approvalâ€
- NO dead buttons
- NO console errors

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
7ï¸âƒ£ VERIFY SUCCESS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Confirm all of the following work:
âœ… Rider signup + verification
âœ… Driver signup + pending verification
âœ… Director signup + admin approval gate
âœ… Correct dashboards per role
âœ… Admin can see Drivers & Directors in Admin panel

DO NOT:
- Remove existing Rider logic
- Fake verification
- Auto-approve Directors
- Mix roles in one dashboard

END GOAL:
Ziba supports proper multi-role onboarding like Uber/Bolt:
Rider â†’ Ride
Driver â†’ Drive
Director â†’ Manage
